{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block nav %}
<a class="nav-link" href="login">Login</a>
<a class="nav-link active" href="register">Register</a>
{% endblock %}

{% block content %}

<form id="register_form">
  <div class="form-group mb-4">
    <h1>Register</h1>
  </div>
  <div class="form-group mb-3">
    <label for="username">User Name</label>
    <input type="text" class="form-control" name="username" id="username" placeholder="Enter username">
  </div>
  <div class="form-group mb-3">
    <label for="email">Email address</label>
    <input type="email" class="form-control" name="email" id="email" placeholder="Enter email">
  </div>
  <div class="form-group mb-3">
    <label for="password">Password</label>
    <input type="password" class="form-control" name="password" id="password" placeholder="Password">
  </div>
  <div class="form-group mb-3">
    <button type="submit" class="btn btn-lg btn-secondary">Submit</button>
  </div>

</form>
{% if msg %}
<p><strong>{{ msg}}</strong>
  {% endif %}

  {{ super() }}

  {% endblock %}
  <!-- end block content -->

  {% block scripts %}

  {{ super() }}

  <script>

    $(document).ready(function () {
      $('#register_form').submit(function (e) {
        e.preventDefault();
        $.ajax({
          type: 'POST',
          url: '{{ url_for("register") }}',
          data: $('#register_form').serialize(),
          success: function (data) {
            window.location.href = '{{url_for("food_log")}}';
          }
        });
      });
    });

  </script>

  {% endblock %}
  <!-- end block scripts -->